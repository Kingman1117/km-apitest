# 用例脚本执行说明

## 优先执行方式（省 Token）

执行测试计划或单条用例时：

1. **读取** `case_scripts/index.json` 获取分组与用例列表
2. **按分组** 登录一次，再依次加载该组下每个 `{caseId}.json` 脚本
3. **严格按脚本 steps 执行**，调用 Playwright MCP 工具（navigate / click / fill / evaluate 等）
4. **仅在 verify 步骤或某步失败时** 才调用 snapshot
5. 结果写入 `test_plan_execution_results.json`，全部完成后批量回填 TAPD

详见项目根目录 `.cursor/rules/script-executor.mdc`。

## 何时才查大段 Skill

- 脚本某步**执行失败**（选择器超时、元素找不到）→ 再打开 `SKILL_TAPD_TEST_EXECUTION.md` 或 `agent_skills/skills/ui-executor/SKILL_zh.md` 查对应章节（如资源选择器 §二、设计器 §21、H5 订单 §23）
- 需要**自愈并更新脚本**时，根据 Skill 中的选择器/代码片段修改对应 `case_scripts/**/{caseId}.json`

## 常用命令

- **执行完整测试计划**：按 index.json 分组顺序执行所有脚本
- **执行分组：管理后台**：只执行 admin 目录下 17 条
- **执行用例：1150695810001062388**：只执行该条脚本
