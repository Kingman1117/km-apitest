{
  "caseId": "1150695810001062421",
  "name": "移动端设计器正常添加助学互动各模块",
  "group": "mobile_designer",
  "needsLogin": "admin",
  "steps": [
    {
      "action": "goto",
      "url": "http://i.edu.fkw.com.faidev.cc/editorNew.jsp?_wxappId=110&__aacct=huaedu1#/"
    },
    {
      "action": "wait",
      "ms": 3000
    },
    {
      "action": "evaluate",
      "script": "const btn = document.querySelector('.know-btn, button:has-text(\"我知道了\"), .guide-close'); if(btn) btn.click();",
      "description": "关闭可能出现的遮罩提示（我知道了）"
    },
    {
      "action": "wait",
      "ms": 1000
    },
    {
      "action": "click",
      "selector": "text=页面",
      "fallbacks": [".page-tab", ".left-panel-tab:has-text('页面')", "[data-tab='page']"],
      "description": "点击左侧「页面」tab"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "click",
      "selector": "text=添加页面",
      "fallbacks": [".add-page-btn", "button:has-text('添加页面')", ".page-add"],
      "description": "点击「添加页面」"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "fill",
      "selector": "input[placeholder*='页面名称'], input[placeholder*='请输入'], .page-name-input input",
      "value": "助学互动{timestamp}",
      "fallbacks": [".el-dialog input", ".modal input[type='text']"],
      "description": "输入页面名称（助学互动+时间戳）"
    },
    {
      "action": "wait",
      "ms": 500
    },
    {
      "action": "click",
      "selector": "button:has-text('确定'), button:has-text('确 定')",
      "fallbacks": [".el-dialog__footer .el-button--primary", ".modal-footer .btn-primary"],
      "description": "确认添加页面"
    },
    {
      "action": "wait",
      "ms": 2000
    },
    {
      "action": "evaluate",
      "script": "const btn = document.querySelector('.know-btn, button:has-text(\"我知道了\"), .guide-close'); if(btn) btn.click();",
      "description": "关闭可能出现的遮罩提示（我知道了）"
    },
    {
      "action": "wait",
      "ms": 1000
    },
    {
      "action": "click",
      "selector": "text=添加模块",
      "fallbacks": [".add-module-btn", "button:has-text('添加模块')", ".module-add-btn"],
      "description": "点击中间区域的「添加模块」"
    },
    {
      "action": "wait",
      "ms": 2000
    },
    {
      "action": "click",
      "selector": "text=助学互动",
      "fallbacks": [".module-category:has-text('助学互动')", ".tab-item:has-text('助学互动')"],
      "description": "选择「助学互动」模块分类"
    },
    {
      "action": "wait",
      "ms": 1000
    },
    {
      "action": "click",
      "selector": ".module-item:has-text('题库'), text=题库",
      "fallbacks": [".module-list .module-item:nth-child(1)"],
      "description": "点击「题库」模块"
    },
    {
      "action": "wait",
      "ms": 2000
    },
    {
      "action": "click",
      "selector": "text=选择题库",
      "fallbacks": [".select-resource-btn", "button:has-text('选择题库')"],
      "description": "点击「选择题库」"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "click",
      "selector": ".el-checkbox:first-child, .checkbox-item:first-child, input[type='checkbox']:first-of-type",
      "fallbacks": [".resource-list .item:first-child .el-checkbox"],
      "description": "勾选第一个题库"
    },
    {
      "action": "wait",
      "ms": 500
    },
    {
      "action": "click",
      "selector": ".icon-arrow-right, .el-icon-arrow-right, .move-right-btn",
      "fallbacks": ["button:has-text('>')", ".transfer-btn-right"],
      "description": "点击向右图标确认选择"
    },
    {
      "action": "wait",
      "ms": 1000
    },
    {
      "action": "click",
      "selector": "button:has-text('确定'), button:has-text('确 定')",
      "fallbacks": [".el-dialog__footer .el-button--primary"],
      "description": "确认题库选择"
    },
    {
      "action": "wait",
      "ms": 2000
    },
    {
      "action": "evaluate",
      "script": "const btn = document.querySelector('.know-btn, button:has-text(\"我知道了\"), .guide-close'); if(btn) btn.click();",
      "description": "关闭可能出现的遮罩提示"
    },
    {
      "action": "wait",
      "ms": 1000
    },
    {
      "action": "click",
      "selector": "text=添加模块",
      "fallbacks": [".add-module-btn", "button:has-text('添加模块')", ".module-add-btn"],
      "description": "再次点击「添加模块」添加答题模块"
    },
    {
      "action": "wait",
      "ms": 2000
    },
    {
      "action": "click",
      "selector": "text=助学互动",
      "fallbacks": [".module-category:has-text('助学互动')", ".tab-item:has-text('助学互动')"],
      "description": "选择「助学互动」分类"
    },
    {
      "action": "wait",
      "ms": 1000
    },
    {
      "action": "click",
      "selector": ".module-item:has-text('答题'), text=答题",
      "fallbacks": [".module-list .module-item:nth-child(2)"],
      "description": "点击「答题」模块"
    },
    {
      "action": "wait",
      "ms": 2000
    },
    {
      "action": "click",
      "selector": "text=选择系列课",
      "fallbacks": [".select-resource-btn", "button:has-text('选择系列课')"],
      "description": "点击「选择系列课」"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "click",
      "selector": ".el-checkbox:first-child, .checkbox-item:first-child, input[type='checkbox']:first-of-type",
      "fallbacks": [".resource-list .item:first-child .el-checkbox"],
      "description": "勾选第一个系列课"
    },
    {
      "action": "wait",
      "ms": 500
    },
    {
      "action": "click",
      "selector": ".icon-arrow-right, .el-icon-arrow-right, .move-right-btn",
      "fallbacks": ["button:has-text('>')", ".transfer-btn-right"],
      "description": "点击向右图标确认选择"
    },
    {
      "action": "wait",
      "ms": 1000
    },
    {
      "action": "click",
      "selector": "button:has-text('确定'), button:has-text('确 定')",
      "fallbacks": [".el-dialog__footer .el-button--primary"],
      "description": "确认系列课选择"
    },
    {
      "action": "wait",
      "ms": 2000
    },
    {
      "action": "click",
      "selector": "text=保存",
      "fallbacks": ["button:has-text('保存')", ".save-btn", ".header-save-btn"],
      "description": "点击保存"
    },
    {
      "action": "wait",
      "ms": 2000
    },
    {
      "action": "verify",
      "expect": "保存成功|保存|助学互动",
      "snapshot": true,
      "description": "验证助学互动模块添加成功"
    }
  ],
  "cleanup": null,
  "verify": "保存成功|保存|助学互动",
  "_note": "基础框架脚本，选择器需实际执行后校准。含题库选择和答题系列课选择子操作"
}
