{
  "caseId": "1150695810001062418",
  "name": "edupc设计器正常添加表单和答题模块，访客态正常预览",
  "group": "edupc_designer",
  "needsLogin": "admin",
  "steps": [
    { "action": "goto", "url": "http://huaedu1-110.edu.fkw.com.faidev.cc/col.jsp?id=130" },
    { "action": "wait", "ms": 2000 },
    {
      "action": "click",
      "selector": ".funPanelEntryBtnSvg, [class*='add_module']",
      "fallbacks": ["getByRole('img').nth(5)"],
      "description": "右下角模块图标打开左侧面板"
    },
    { "action": "click", "selector": "text=营销" },
    { "action": "click", "selector": "text=表单" },
    { "action": "wait", "ms": 1000 },
    {
      "action": "evaluate",
      "script": "await page.locator('[role=radio]').filter({ hasText: /表单_/ }).first().click();",
      "description": "右侧表单列表选择任意一个表单radio"
    },
    { "action": "wait", "ms": 500 },
    { "action": "click", "selector": "text=助学" },
    { "action": "click", "selector": "text=答题" },
    { "action": "wait", "ms": 500 },
    { "action": "click", "selector": "text=选择答题", "fallbacks": ["button:has-text('选择答题')"] },
    { "action": "wait", "ms": 1500 },
    {
      "action": "evaluate",
      "script": "for (const iframe of await page.locator('iframe').all()) { const frame = await iframe.contentFrame(); if (!frame) continue; const item = frame.locator('text=km自动提交答题').first(); if (await item.count() > 0) { await item.click(); break; } }",
      "description": "iframe内选择任一答题活动"
    },
    { "action": "wait", "ms": 500 },
    { "action": "click", "selector": "button:has-text('确 定')", "force": true },
    { "action": "wait", "ms": 1000 },
    { "action": "click", "selector": "text=保存", "fallbacks": ["button:has-text('保存')"] },
    { "action": "wait", "ms": 2000 },
    { "action": "click", "selector": "text=预览", "fallbacks": ["button:has-text('预览')"] },
    { "action": "wait", "ms": 3000 },
    {
      "action": "verify",
      "expect": "预览|访客|页面|表单|答题",
      "snapshot": true,
      "description": "验证表单和答题模块添加并预览成功"
    }
  ],
  "cleanup": null,
  "verify": "预览|访客|页面|表单|答题"
}
